---
import type { LazyPictureProps } from "./LazyPicture.types";

const {
  defaultSrc,
  sources,
  isWelcome = false,
} = Astro.props as LazyPictureProps;
---

<picture class="lazy-picture">
  {
    isWelcome
      ? sources.map((source) => (
          <source
            srcset={
              source.src2x ? `${source.src} 1x, ${source.src2x} 2x` : source.src
            }
            media={source.media}
          />
        ))
      : sources.map((source) => (
          <source
            data-custom-srcset={
              source.src2x ? `${source.src} 1x, ${source.src2x} 2x` : source.src
            }
            media={source.media}
          />
        ))
  }
  {
    isWelcome ? (
      <img decoding="async" loading="lazy" src={defaultSrc} alt="" />
    ) : (
      <img decoding="async" class="lazy" data-custom-src={defaultSrc} alt="" />
    )
  }
</picture>
